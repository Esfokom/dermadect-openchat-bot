2025-04-30 14:58:54,866 - main - INFO - Received game request from user 1234
2025-04-30 14:58:59,218 - agents.game_agent - INFO - Starting to generate 5 questions
2025-04-30 14:58:59,219 - agents.game_agent - INFO - Generating question 1/5
2025-04-30 14:58:59,220 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 14:58:59,220 - agents.game_agent - ERROR - Unexpected error generating question: '\n                "text"'
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 79, in generate_question
    response = await self.llm.ainvoke(self.question_prompt.format_messages())
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 1186, in format_messages
    message = message_template.format_messages(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 558, in format_messages
    return [self.format(**kwargs)]
            ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 591, in format
    text = self.prompt.format(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\prompt.py", line 186, in format
    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 190, in format
    return self.vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\utils\formatting.py", line 33, in vformat
    return super().vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 194, in vformat
    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 234, in _vformat
    obj, arg_used = self.get_field(field_name, args, kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 299, in get_field
    obj = self.get_value(first, args, kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 256, in get_value
    return kwargs[key]
           ~~~~~~^^^^^
KeyError: '\n                "text"'
2025-04-30 14:58:59,271 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 14:59:01,284 - agents.game_agent - INFO - Attempting to generate question (attempt 2/3)
2025-04-30 14:59:01,286 - agents.game_agent - ERROR - Unexpected error generating question: '\n                "text"'
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 79, in generate_question
    response = await self.llm.ainvoke(self.question_prompt.format_messages())
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 1186, in format_messages
    message = message_template.format_messages(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 558, in format_messages
    return [self.format(**kwargs)]
            ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 591, in format
    text = self.prompt.format(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\prompt.py", line 186, in format
    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 190, in format
    return self.vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\utils\formatting.py", line 33, in vformat
    return super().vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 194, in vformat
    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 234, in _vformat
    obj, arg_used = self.get_field(field_name, args, kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 299, in get_field
    obj = self.get_value(first, args, kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 256, in get_value
    return kwargs[key]
           ~~~~~~^^^^^
KeyError: '\n                "text"'
2025-04-30 14:59:01,294 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 14:59:03,322 - agents.game_agent - INFO - Attempting to generate question (attempt 3/3)
2025-04-30 14:59:03,324 - agents.game_agent - ERROR - Unexpected error generating question: '\n                "text"'
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 79, in generate_question
    response = await self.llm.ainvoke(self.question_prompt.format_messages())
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 1186, in format_messages
    message = message_template.format_messages(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 558, in format_messages
    return [self.format(**kwargs)]
            ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 591, in format
    text = self.prompt.format(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\prompt.py", line 186, in format
    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 190, in format
    return self.vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\utils\formatting.py", line 33, in vformat
    return super().vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 194, in vformat
    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 234, in _vformat
    obj, arg_used = self.get_field(field_name, args, kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 299, in get_field
    obj = self.get_value(first, args, kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 256, in get_value
    return kwargs[key]
           ~~~~~~^^^^^
KeyError: '\n                "text"'
2025-04-30 14:59:03,330 - agents.game_agent - WARNING - All retries failed, using fallback question
2025-04-30 14:59:04,340 - agents.game_agent - INFO - Generating question 2/5
2025-04-30 14:59:04,343 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 14:59:04,343 - agents.game_agent - ERROR - Unexpected error generating question: '\n                "text"'
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 79, in generate_question
    response = await self.llm.ainvoke(self.question_prompt.format_messages())
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 1186, in format_messages
    message = message_template.format_messages(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 558, in format_messages
    return [self.format(**kwargs)]
            ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 591, in format
    text = self.prompt.format(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\prompt.py", line 186, in format
    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 190, in format
    return self.vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\utils\formatting.py", line 33, in vformat
    return super().vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 194, in vformat
    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 234, in _vformat
    obj, arg_used = self.get_field(field_name, args, kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 299, in get_field
    obj = self.get_value(first, args, kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 256, in get_value
    return kwargs[key]
           ~~~~~~^^^^^
KeyError: '\n                "text"'
2025-04-30 14:59:04,355 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 14:59:06,384 - agents.game_agent - INFO - Attempting to generate question (attempt 2/3)
2025-04-30 14:59:06,385 - agents.game_agent - ERROR - Unexpected error generating question: '\n                "text"'
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 79, in generate_question
    response = await self.llm.ainvoke(self.question_prompt.format_messages())
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 1186, in format_messages
    message = message_template.format_messages(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 558, in format_messages
    return [self.format(**kwargs)]
            ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 591, in format
    text = self.prompt.format(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\prompt.py", line 186, in format
    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 190, in format
    return self.vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\utils\formatting.py", line 33, in vformat
    return super().vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 194, in vformat
    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 234, in _vformat
    obj, arg_used = self.get_field(field_name, args, kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 299, in get_field
    obj = self.get_value(first, args, kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 256, in get_value
    return kwargs[key]
           ~~~~~~^^^^^
KeyError: '\n                "text"'
2025-04-30 14:59:06,391 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 14:59:08,414 - agents.game_agent - INFO - Attempting to generate question (attempt 3/3)
2025-04-30 14:59:08,416 - agents.game_agent - ERROR - Unexpected error generating question: '\n                "text"'
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 79, in generate_question
    response = await self.llm.ainvoke(self.question_prompt.format_messages())
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 1186, in format_messages
    message = message_template.format_messages(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 558, in format_messages
    return [self.format(**kwargs)]
            ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 591, in format
    text = self.prompt.format(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\prompt.py", line 186, in format
    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 190, in format
    return self.vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\utils\formatting.py", line 33, in vformat
    return super().vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 194, in vformat
    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 234, in _vformat
    obj, arg_used = self.get_field(field_name, args, kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 299, in get_field
    obj = self.get_value(first, args, kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 256, in get_value
    return kwargs[key]
           ~~~~~~^^^^^
KeyError: '\n                "text"'
2025-04-30 14:59:08,422 - agents.game_agent - WARNING - All retries failed, using fallback question
2025-04-30 14:59:09,433 - agents.game_agent - INFO - Generating question 3/5
2025-04-30 14:59:09,433 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 14:59:09,434 - agents.game_agent - ERROR - Unexpected error generating question: '\n                "text"'
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 79, in generate_question
    response = await self.llm.ainvoke(self.question_prompt.format_messages())
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 1186, in format_messages
    message = message_template.format_messages(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 558, in format_messages
    return [self.format(**kwargs)]
            ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 591, in format
    text = self.prompt.format(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\prompt.py", line 186, in format
    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 190, in format
    return self.vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\utils\formatting.py", line 33, in vformat
    return super().vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 194, in vformat
    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 234, in _vformat
    obj, arg_used = self.get_field(field_name, args, kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 299, in get_field
    obj = self.get_value(first, args, kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 256, in get_value
    return kwargs[key]
           ~~~~~~^^^^^
KeyError: '\n                "text"'
2025-04-30 14:59:09,442 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 14:59:11,455 - agents.game_agent - INFO - Attempting to generate question (attempt 2/3)
2025-04-30 14:59:11,458 - agents.game_agent - ERROR - Unexpected error generating question: '\n                "text"'
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 79, in generate_question
    response = await self.llm.ainvoke(self.question_prompt.format_messages())
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 1186, in format_messages
    message = message_template.format_messages(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 558, in format_messages
    return [self.format(**kwargs)]
            ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 591, in format
    text = self.prompt.format(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\prompt.py", line 186, in format
    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 190, in format
    return self.vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\utils\formatting.py", line 33, in vformat
    return super().vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 194, in vformat
    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 234, in _vformat
    obj, arg_used = self.get_field(field_name, args, kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 299, in get_field
    obj = self.get_value(first, args, kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 256, in get_value
    return kwargs[key]
           ~~~~~~^^^^^
KeyError: '\n                "text"'
2025-04-30 14:59:11,466 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 14:59:13,484 - agents.game_agent - INFO - Attempting to generate question (attempt 3/3)
2025-04-30 14:59:13,486 - agents.game_agent - ERROR - Unexpected error generating question: '\n                "text"'
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 79, in generate_question
    response = await self.llm.ainvoke(self.question_prompt.format_messages())
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 1186, in format_messages
    message = message_template.format_messages(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 558, in format_messages
    return [self.format(**kwargs)]
            ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 591, in format
    text = self.prompt.format(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\prompt.py", line 186, in format
    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 190, in format
    return self.vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\utils\formatting.py", line 33, in vformat
    return super().vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 194, in vformat
    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 234, in _vformat
    obj, arg_used = self.get_field(field_name, args, kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 299, in get_field
    obj = self.get_value(first, args, kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 256, in get_value
    return kwargs[key]
           ~~~~~~^^^^^
KeyError: '\n                "text"'
2025-04-30 14:59:13,492 - agents.game_agent - WARNING - All retries failed, using fallback question
2025-04-30 14:59:14,507 - agents.game_agent - INFO - Generating question 4/5
2025-04-30 14:59:14,510 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 14:59:14,510 - agents.game_agent - ERROR - Unexpected error generating question: '\n                "text"'
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 79, in generate_question
    response = await self.llm.ainvoke(self.question_prompt.format_messages())
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 1186, in format_messages
    message = message_template.format_messages(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 558, in format_messages
    return [self.format(**kwargs)]
            ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 591, in format
    text = self.prompt.format(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\prompt.py", line 186, in format
    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 190, in format
    return self.vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\utils\formatting.py", line 33, in vformat
    return super().vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 194, in vformat
    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 234, in _vformat
    obj, arg_used = self.get_field(field_name, args, kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 299, in get_field
    obj = self.get_value(first, args, kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 256, in get_value
    return kwargs[key]
           ~~~~~~^^^^^
KeyError: '\n                "text"'
2025-04-30 14:59:14,524 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 14:59:16,547 - agents.game_agent - INFO - Attempting to generate question (attempt 2/3)
2025-04-30 14:59:16,552 - agents.game_agent - ERROR - Unexpected error generating question: '\n                "text"'
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 79, in generate_question
    response = await self.llm.ainvoke(self.question_prompt.format_messages())
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 1186, in format_messages
    message = message_template.format_messages(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 558, in format_messages
    return [self.format(**kwargs)]
            ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 591, in format
    text = self.prompt.format(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\prompt.py", line 186, in format
    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 190, in format
    return self.vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\utils\formatting.py", line 33, in vformat
    return super().vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 194, in vformat
    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 234, in _vformat
    obj, arg_used = self.get_field(field_name, args, kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 299, in get_field
    obj = self.get_value(first, args, kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 256, in get_value
    return kwargs[key]
           ~~~~~~^^^^^
KeyError: '\n                "text"'
2025-04-30 14:59:16,572 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 14:59:18,580 - agents.game_agent - INFO - Attempting to generate question (attempt 3/3)
2025-04-30 14:59:18,581 - agents.game_agent - ERROR - Unexpected error generating question: '\n                "text"'
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 79, in generate_question
    response = await self.llm.ainvoke(self.question_prompt.format_messages())
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 1186, in format_messages
    message = message_template.format_messages(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 558, in format_messages
    return [self.format(**kwargs)]
            ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 591, in format
    text = self.prompt.format(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\prompt.py", line 186, in format
    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 190, in format
    return self.vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\utils\formatting.py", line 33, in vformat
    return super().vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 194, in vformat
    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 234, in _vformat
    obj, arg_used = self.get_field(field_name, args, kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 299, in get_field
    obj = self.get_value(first, args, kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 256, in get_value
    return kwargs[key]
           ~~~~~~^^^^^
KeyError: '\n                "text"'
2025-04-30 14:59:18,588 - agents.game_agent - WARNING - All retries failed, using fallback question
2025-04-30 14:59:19,607 - agents.game_agent - INFO - Generating question 5/5
2025-04-30 14:59:19,609 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 14:59:19,611 - agents.game_agent - ERROR - Unexpected error generating question: '\n                "text"'
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 79, in generate_question
    response = await self.llm.ainvoke(self.question_prompt.format_messages())
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 1186, in format_messages
    message = message_template.format_messages(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 558, in format_messages
    return [self.format(**kwargs)]
            ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 591, in format
    text = self.prompt.format(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\prompt.py", line 186, in format
    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 190, in format
    return self.vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\utils\formatting.py", line 33, in vformat
    return super().vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 194, in vformat
    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 234, in _vformat
    obj, arg_used = self.get_field(field_name, args, kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 299, in get_field
    obj = self.get_value(first, args, kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 256, in get_value
    return kwargs[key]
           ~~~~~~^^^^^
KeyError: '\n                "text"'
2025-04-30 14:59:19,617 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 14:59:21,622 - agents.game_agent - INFO - Attempting to generate question (attempt 2/3)
2025-04-30 14:59:21,623 - agents.game_agent - ERROR - Unexpected error generating question: '\n                "text"'
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 79, in generate_question
    response = await self.llm.ainvoke(self.question_prompt.format_messages())
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 1186, in format_messages
    message = message_template.format_messages(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 558, in format_messages
    return [self.format(**kwargs)]
            ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 591, in format
    text = self.prompt.format(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\prompt.py", line 186, in format
    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 190, in format
    return self.vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\utils\formatting.py", line 33, in vformat
    return super().vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 194, in vformat
    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 234, in _vformat
    obj, arg_used = self.get_field(field_name, args, kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 299, in get_field
    obj = self.get_value(first, args, kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 256, in get_value
    return kwargs[key]
           ~~~~~~^^^^^
KeyError: '\n                "text"'
2025-04-30 14:59:21,629 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 14:59:23,648 - agents.game_agent - INFO - Attempting to generate question (attempt 3/3)
2025-04-30 14:59:23,649 - agents.game_agent - ERROR - Unexpected error generating question: '\n                "text"'
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 79, in generate_question
    response = await self.llm.ainvoke(self.question_prompt.format_messages())
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 1186, in format_messages
    message = message_template.format_messages(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 558, in format_messages
    return [self.format(**kwargs)]
            ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\chat.py", line 591, in format
    text = self.prompt.format(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\prompt.py", line 186, in format
    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 190, in format
    return self.vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\utils\formatting.py", line 33, in vformat
    return super().vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 194, in vformat
    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 234, in _vformat
    obj, arg_used = self.get_field(field_name, args, kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 299, in get_field
    obj = self.get_value(first, args, kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\string.py", line 256, in get_value
    return kwargs[key]
           ~~~~~~^^^^^
KeyError: '\n                "text"'
2025-04-30 14:59:23,655 - agents.game_agent - WARNING - All retries failed, using fallback question
2025-04-30 14:59:24,662 - agents.game_agent - INFO - Successfully generated 5 questions
2025-04-30 15:04:30,239 - main - INFO - Received game request from user 1234
2025-04-30 15:04:33,506 - agents.game_agent - INFO - Starting to generate 5 questions
2025-04-30 15:04:33,506 - agents.game_agent - INFO - Generating question 1/5
2025-04-30 15:04:33,507 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 15:04:33,573 - agents.game_agent - ERROR - Unexpected error generating question: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 93, in generate_question
    response = await self.chain.ainvoke("")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 3075, in ainvoke
    input = await coro_with_context(part(), context, create_task=True)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 242, in ainvoke
    return await self._acall_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 1981, in _acall_with_config
    output: Output = await coro_with_context(coro, context)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 195, in _aformat_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-04-30 15:04:33,608 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:04:35,642 - agents.game_agent - INFO - Attempting to generate question (attempt 2/3)
2025-04-30 15:04:35,649 - agents.game_agent - ERROR - Unexpected error generating question: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 93, in generate_question
    response = await self.chain.ainvoke("")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 3075, in ainvoke
    input = await coro_with_context(part(), context, create_task=True)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 242, in ainvoke
    return await self._acall_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 1981, in _acall_with_config
    output: Output = await coro_with_context(coro, context)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 195, in _aformat_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-04-30 15:04:35,664 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:04:37,710 - agents.game_agent - INFO - Attempting to generate question (attempt 3/3)
2025-04-30 15:04:37,719 - agents.game_agent - ERROR - Unexpected error generating question: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 93, in generate_question
    response = await self.chain.ainvoke("")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 3075, in ainvoke
    input = await coro_with_context(part(), context, create_task=True)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 242, in ainvoke
    return await self._acall_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 1981, in _acall_with_config
    output: Output = await coro_with_context(coro, context)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 195, in _aformat_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-04-30 15:04:37,748 - agents.game_agent - WARNING - All retries failed, using fallback question
2025-04-30 15:04:38,780 - agents.game_agent - INFO - Generating question 2/5
2025-04-30 15:04:38,782 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 15:04:38,786 - agents.game_agent - ERROR - Unexpected error generating question: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 93, in generate_question
    response = await self.chain.ainvoke("")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 3075, in ainvoke
    input = await coro_with_context(part(), context, create_task=True)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 242, in ainvoke
    return await self._acall_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 1981, in _acall_with_config
    output: Output = await coro_with_context(coro, context)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 195, in _aformat_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-04-30 15:04:38,791 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:04:40,802 - agents.game_agent - INFO - Attempting to generate question (attempt 2/3)
2025-04-30 15:04:40,817 - agents.game_agent - ERROR - Unexpected error generating question: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 93, in generate_question
    response = await self.chain.ainvoke("")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 3075, in ainvoke
    input = await coro_with_context(part(), context, create_task=True)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 242, in ainvoke
    return await self._acall_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 1981, in _acall_with_config
    output: Output = await coro_with_context(coro, context)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 195, in _aformat_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-04-30 15:04:40,858 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:04:42,874 - agents.game_agent - INFO - Attempting to generate question (attempt 3/3)
2025-04-30 15:04:42,892 - agents.game_agent - ERROR - Unexpected error generating question: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 93, in generate_question
    response = await self.chain.ainvoke("")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 3075, in ainvoke
    input = await coro_with_context(part(), context, create_task=True)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 242, in ainvoke
    return await self._acall_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 1981, in _acall_with_config
    output: Output = await coro_with_context(coro, context)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 195, in _aformat_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-04-30 15:04:42,902 - agents.game_agent - WARNING - All retries failed, using fallback question
2025-04-30 15:04:43,919 - agents.game_agent - INFO - Generating question 3/5
2025-04-30 15:04:43,921 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 15:04:43,926 - agents.game_agent - ERROR - Unexpected error generating question: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 93, in generate_question
    response = await self.chain.ainvoke("")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 3075, in ainvoke
    input = await coro_with_context(part(), context, create_task=True)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 242, in ainvoke
    return await self._acall_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 1981, in _acall_with_config
    output: Output = await coro_with_context(coro, context)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 195, in _aformat_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-04-30 15:04:43,933 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:04:45,952 - agents.game_agent - INFO - Attempting to generate question (attempt 2/3)
2025-04-30 15:04:45,957 - agents.game_agent - ERROR - Unexpected error generating question: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 93, in generate_question
    response = await self.chain.ainvoke("")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 3075, in ainvoke
    input = await coro_with_context(part(), context, create_task=True)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 242, in ainvoke
    return await self._acall_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 1981, in _acall_with_config
    output: Output = await coro_with_context(coro, context)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 195, in _aformat_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-04-30 15:04:45,960 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:04:47,962 - agents.game_agent - INFO - Attempting to generate question (attempt 3/3)
2025-04-30 15:04:47,967 - agents.game_agent - ERROR - Unexpected error generating question: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 93, in generate_question
    response = await self.chain.ainvoke("")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 3075, in ainvoke
    input = await coro_with_context(part(), context, create_task=True)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 242, in ainvoke
    return await self._acall_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 1981, in _acall_with_config
    output: Output = await coro_with_context(coro, context)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 195, in _aformat_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-04-30 15:04:47,973 - agents.game_agent - WARNING - All retries failed, using fallback question
2025-04-30 15:04:48,981 - agents.game_agent - INFO - Generating question 4/5
2025-04-30 15:04:49,009 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 15:04:49,047 - agents.game_agent - ERROR - Unexpected error generating question: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 93, in generate_question
    response = await self.chain.ainvoke("")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 3075, in ainvoke
    input = await coro_with_context(part(), context, create_task=True)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 242, in ainvoke
    return await self._acall_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 1981, in _acall_with_config
    output: Output = await coro_with_context(coro, context)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 195, in _aformat_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-04-30 15:04:49,080 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:04:51,111 - agents.game_agent - INFO - Attempting to generate question (attempt 2/3)
2025-04-30 15:04:51,118 - agents.game_agent - ERROR - Unexpected error generating question: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 93, in generate_question
    response = await self.chain.ainvoke("")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 3075, in ainvoke
    input = await coro_with_context(part(), context, create_task=True)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 242, in ainvoke
    return await self._acall_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 1981, in _acall_with_config
    output: Output = await coro_with_context(coro, context)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 195, in _aformat_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-04-30 15:04:51,131 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:04:53,174 - agents.game_agent - INFO - Attempting to generate question (attempt 3/3)
2025-04-30 15:04:53,179 - agents.game_agent - ERROR - Unexpected error generating question: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 93, in generate_question
    response = await self.chain.ainvoke("")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 3075, in ainvoke
    input = await coro_with_context(part(), context, create_task=True)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 242, in ainvoke
    return await self._acall_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 1981, in _acall_with_config
    output: Output = await coro_with_context(coro, context)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 195, in _aformat_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-04-30 15:04:53,184 - agents.game_agent - WARNING - All retries failed, using fallback question
2025-04-30 15:04:54,209 - agents.game_agent - INFO - Generating question 5/5
2025-04-30 15:04:54,212 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 15:04:54,223 - agents.game_agent - ERROR - Unexpected error generating question: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 93, in generate_question
    response = await self.chain.ainvoke("")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 3075, in ainvoke
    input = await coro_with_context(part(), context, create_task=True)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 242, in ainvoke
    return await self._acall_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 1981, in _acall_with_config
    output: Output = await coro_with_context(coro, context)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 195, in _aformat_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-04-30 15:04:54,256 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:04:56,301 - agents.game_agent - INFO - Attempting to generate question (attempt 2/3)
2025-04-30 15:04:56,334 - agents.game_agent - ERROR - Unexpected error generating question: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 93, in generate_question
    response = await self.chain.ainvoke("")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 3075, in ainvoke
    input = await coro_with_context(part(), context, create_task=True)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 242, in ainvoke
    return await self._acall_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 1981, in _acall_with_config
    output: Output = await coro_with_context(coro, context)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 195, in _aformat_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-04-30 15:04:56,447 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:04:58,604 - agents.game_agent - INFO - Attempting to generate question (attempt 3/3)
2025-04-30 15:04:58,714 - agents.game_agent - ERROR - Unexpected error generating question: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 93, in generate_question
    response = await self.chain.ainvoke("")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 3075, in ainvoke
    input = await coro_with_context(part(), context, create_task=True)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 242, in ainvoke
    return await self._acall_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 1981, in _acall_with_config
    output: Output = await coro_with_context(coro, context)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 195, in _aformat_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n                "text"\'}.  Expected: [\'\\n                "text"\'] Received: [\'input\']\nNote: if you intended {\n                "text"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "text"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-04-30 15:04:59,070 - agents.game_agent - WARNING - All retries failed, using fallback question
2025-04-30 15:05:00,146 - agents.game_agent - INFO - Successfully generated 5 questions
2025-04-30 15:07:18,354 - main - INFO - Received game request from user 1234
2025-04-30 15:07:22,721 - agents.game_agent - INFO - Starting to generate 5 questions
2025-04-30 15:07:22,722 - agents.game_agent - INFO - Generating question 1/5
2025-04-30 15:07:22,722 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 15:07:27,421 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Pancreas"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter waste products, excess water, and other impurities from the blood. These are then excreted as urine."
}
```
2025-04-30 15:07:27,422 - agents.game_agent - ERROR - Failed to parse JSON response: Expecting value: line 1 column 1 (char 0)
2025-04-30 15:07:27,423 - agents.game_agent - DEBUG - Raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Pancreas"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter waste products, excess water, and other impurities from the blood. These are then excreted as urine."
}
```
2025-04-30 15:07:27,426 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:07:29,419 - agents.game_agent - INFO - Attempting to generate question (attempt 2/3)
2025-04-30 15:07:51,227 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": ["Liver", "Kidney", "Spleen", "Pancreas"],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys are the primary organs responsible for filtering waste products, excess water, and other impurities from the blood. They then excrete these wastes as urine."
}
```
2025-04-30 15:07:51,228 - agents.game_agent - ERROR - Failed to parse JSON response: Expecting value: line 1 column 1 (char 0)
2025-04-30 15:07:51,229 - agents.game_agent - DEBUG - Raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": ["Liver", "Kidney", "Spleen", "Pancreas"],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys are the primary organs responsible for filtering waste products, excess water, and other impurities from the blood. They then excrete these wastes as urine."
}
```
2025-04-30 15:07:51,231 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:07:53,247 - agents.game_agent - INFO - Attempting to generate question (attempt 3/3)
2025-04-30 15:08:09,052 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Pancreas"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter waste products from the blood and produce urine. The liver processes nutrients and detoxifies harmful substances. The spleen filters blood and helps fight infections. The pancreas produces enzymes and hormones."
}
```
2025-04-30 15:08:09,054 - agents.game_agent - ERROR - Failed to parse JSON response: Expecting value: line 1 column 1 (char 0)
2025-04-30 15:08:09,055 - agents.game_agent - DEBUG - Raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Pancreas"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter waste products from the blood and produce urine. The liver processes nutrients and detoxifies harmful substances. The spleen filters blood and helps fight infections. The pancreas produces enzymes and hormones."
}
```
2025-04-30 15:08:09,055 - agents.game_agent - WARNING - All retries failed, using fallback question
2025-04-30 15:08:10,071 - agents.game_agent - INFO - Generating question 2/5
2025-04-30 15:08:10,072 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 15:08:13,724 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Gallbladder"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter waste products from the blood and produce urine. The liver processes nutrients and detoxifies substances, the spleen filters blood and helps fight infections, and the gallbladder stores bile."
}
```
2025-04-30 15:08:13,725 - agents.game_agent - ERROR - Failed to parse JSON response: Expecting value: line 1 column 1 (char 0)
2025-04-30 15:08:13,729 - agents.game_agent - DEBUG - Raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Gallbladder"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter waste products from the blood and produce urine. The liver processes nutrients and detoxifies substances, the spleen filters blood and helps fight infections, and the gallbladder stores bile."
}
```
2025-04-30 15:08:13,729 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:08:15,755 - agents.game_agent - INFO - Attempting to generate question (attempt 2/3)
2025-04-30 15:08:19,531 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Gallbladder"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys are the primary organs responsible for filtering waste products, excess water, and other impurities from the blood. The liver processes toxins, the spleen filters blood and helps fight infections, and the gallbladder stores bile."
}
```
2025-04-30 15:08:19,533 - agents.game_agent - ERROR - Failed to parse JSON response: Expecting value: line 1 column 1 (char 0)
2025-04-30 15:08:19,534 - agents.game_agent - DEBUG - Raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Gallbladder"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys are the primary organs responsible for filtering waste products, excess water, and other impurities from the blood. The liver processes toxins, the spleen filters blood and helps fight infections, and the gallbladder stores bile."
}
```
2025-04-30 15:08:19,535 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:08:21,535 - agents.game_agent - INFO - Attempting to generate question (attempt 3/3)
2025-04-30 15:08:29,715 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Pancreas"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter waste products and excess fluid from the blood, which are then excreted as urine. The liver processes toxins, the spleen filters blood and fights infections, and the pancreas produces enzymes and hormones."
}
```
2025-04-30 15:08:29,718 - agents.game_agent - ERROR - Failed to parse JSON response: Expecting value: line 1 column 1 (char 0)
2025-04-30 15:08:29,718 - agents.game_agent - DEBUG - Raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Pancreas"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter waste products and excess fluid from the blood, which are then excreted as urine. The liver processes toxins, the spleen filters blood and fights infections, and the pancreas produces enzymes and hormones."
}
```
2025-04-30 15:08:29,720 - agents.game_agent - WARNING - All retries failed, using fallback question
2025-04-30 15:08:30,721 - agents.game_agent - INFO - Generating question 3/5
2025-04-30 15:08:30,722 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 15:08:40,936 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": ["Liver", "Kidney", "Spleen", "Pancreas"],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter waste products from the blood and produce urine. The liver processes toxins, the spleen filters blood and stores white blood cells, and the pancreas produces hormones and digestive enzymes."
}
```
2025-04-30 15:08:40,992 - agents.game_agent - ERROR - Failed to parse JSON response: Expecting value: line 1 column 1 (char 0)
2025-04-30 15:08:41,001 - agents.game_agent - DEBUG - Raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": ["Liver", "Kidney", "Spleen", "Pancreas"],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter waste products from the blood and produce urine. The liver processes toxins, the spleen filters blood and stores white blood cells, and the pancreas produces hormones and digestive enzymes."
}
```
2025-04-30 15:08:41,006 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:08:43,025 - agents.game_agent - INFO - Attempting to generate question (attempt 2/3)
2025-04-30 15:08:44,556 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": ["Liver", "Kidney", "Spleen", "Gallbladder"],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter blood to remove waste products, excess water, and electrolytes, which are then excreted as urine."
}
```
2025-04-30 15:08:44,576 - agents.game_agent - ERROR - Failed to parse JSON response: Expecting value: line 1 column 1 (char 0)
2025-04-30 15:08:44,578 - agents.game_agent - DEBUG - Raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": ["Liver", "Kidney", "Spleen", "Gallbladder"],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter blood to remove waste products, excess water, and electrolytes, which are then excreted as urine."
}
```
2025-04-30 15:08:44,581 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:08:46,600 - agents.game_agent - INFO - Attempting to generate question (attempt 3/3)
2025-04-30 15:08:51,601 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": ["Liver", "Kidney", "Spleen", "Gallbladder"],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter waste products from the blood and produce urine. The liver processes toxins, the spleen filters blood and helps fight infections, and the gallbladder stores bile."
}
```
2025-04-30 15:08:51,614 - agents.game_agent - ERROR - Failed to parse JSON response: Expecting value: line 1 column 1 (char 0)
2025-04-30 15:08:51,659 - agents.game_agent - DEBUG - Raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": ["Liver", "Kidney", "Spleen", "Gallbladder"],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter waste products from the blood and produce urine. The liver processes toxins, the spleen filters blood and helps fight infections, and the gallbladder stores bile."
}
```
2025-04-30 15:08:51,965 - agents.game_agent - WARNING - All retries failed, using fallback question
2025-04-30 15:08:53,033 - agents.game_agent - INFO - Generating question 4/5
2025-04-30 15:08:53,034 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 15:09:26,604 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Pancreas"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys are the primary organs responsible for filtering waste products, excess water, and other impurities from the blood. They produce urine as a result of this process."
}
```
2025-04-30 15:09:26,613 - agents.game_agent - ERROR - Failed to parse JSON response: Expecting value: line 1 column 1 (char 0)
2025-04-30 15:09:26,614 - agents.game_agent - DEBUG - Raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Pancreas"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys are the primary organs responsible for filtering waste products, excess water, and other impurities from the blood. They produce urine as a result of this process."
}
```
2025-04-30 15:09:26,615 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:09:28,620 - agents.game_agent - INFO - Attempting to generate question (attempt 2/3)
2025-04-30 15:09:33,129 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": ["Liver", "Kidney", "Spleen", "Gallbladder"],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter waste and excess fluids from the blood, which are then excreted as urine. The liver detoxifies chemicals, the spleen filters blood and the gallbladder stores bile."
}
```
2025-04-30 15:09:33,132 - agents.game_agent - ERROR - Failed to parse JSON response: Expecting value: line 1 column 1 (char 0)
2025-04-30 15:09:33,133 - agents.game_agent - DEBUG - Raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": ["Liver", "Kidney", "Spleen", "Gallbladder"],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter waste and excess fluids from the blood, which are then excreted as urine. The liver detoxifies chemicals, the spleen filters blood and the gallbladder stores bile."
}
```
2025-04-30 15:09:33,134 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:09:35,144 - agents.game_agent - INFO - Attempting to generate question (attempt 3/3)
2025-04-30 15:09:59,192 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Pancreas"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter waste products from the blood and produce urine. The liver processes toxins, the spleen filters blood and stores white blood cells, and the pancreas produces hormones and digestive enzymes."
}
```
2025-04-30 15:09:59,196 - agents.game_agent - ERROR - Failed to parse JSON response: Expecting value: line 1 column 1 (char 0)
2025-04-30 15:09:59,196 - agents.game_agent - DEBUG - Raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Pancreas"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter waste products from the blood and produce urine. The liver processes toxins, the spleen filters blood and stores white blood cells, and the pancreas produces hormones and digestive enzymes."
}
```
2025-04-30 15:09:59,197 - agents.game_agent - WARNING - All retries failed, using fallback question
2025-04-30 15:10:00,219 - agents.game_agent - INFO - Generating question 5/5
2025-04-30 15:10:00,222 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 15:10:04,462 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Pancreas"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys are the primary organs responsible for filtering waste products, excess water, and other impurities from the blood. This process forms urine, which is then excreted from the body."
}
```
2025-04-30 15:10:04,463 - agents.game_agent - ERROR - Failed to parse JSON response: Expecting value: line 1 column 1 (char 0)
2025-04-30 15:10:04,464 - agents.game_agent - DEBUG - Raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Pancreas"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys are the primary organs responsible for filtering waste products, excess water, and other impurities from the blood. This process forms urine, which is then excreted from the body."
}
```
2025-04-30 15:10:04,466 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:10:06,487 - agents.game_agent - INFO - Attempting to generate question (attempt 2/3)
2025-04-30 15:10:09,813 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Pancreas"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter blood to remove waste products, which are then excreted as urine. The liver processes toxins, the spleen filters blood and removes old blood cells, and the pancreas produces hormones and digestive enzymes."
}
```
2025-04-30 15:10:09,813 - agents.game_agent - ERROR - Failed to parse JSON response: Expecting value: line 1 column 1 (char 0)
2025-04-30 15:10:09,814 - agents.game_agent - DEBUG - Raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Pancreas"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter blood to remove waste products, which are then excreted as urine. The liver processes toxins, the spleen filters blood and removes old blood cells, and the pancreas produces hormones and digestive enzymes."
}
```
2025-04-30 15:10:09,815 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:10:11,834 - agents.game_agent - INFO - Attempting to generate question (attempt 3/3)
2025-04-30 15:10:20,569 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Pancreas"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter waste products from the blood and produce urine. The liver processes toxins, the spleen filters blood and helps fight infections, and the pancreas produces hormones and enzymes for digestion."
}
```
2025-04-30 15:10:20,573 - agents.game_agent - ERROR - Failed to parse JSON response: Expecting value: line 1 column 1 (char 0)
2025-04-30 15:10:20,576 - agents.game_agent - DEBUG - Raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Pancreas"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys filter waste products from the blood and produce urine. The liver processes toxins, the spleen filters blood and helps fight infections, and the pancreas produces hormones and enzymes for digestion."
}
```
2025-04-30 15:10:20,578 - agents.game_agent - WARNING - All retries failed, using fallback question
2025-04-30 15:10:21,601 - agents.game_agent - INFO - Successfully generated 5 questions
2025-04-30 15:11:06,181 - main - INFO - Received game request from user 1234
2025-04-30 15:11:09,597 - agents.game_agent - INFO - Starting to generate 5 questions
2025-04-30 15:11:09,601 - agents.game_agent - INFO - Generating question 1/5
2025-04-30 15:11:09,602 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 15:11:12,050 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering blood and removing waste products from the body?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Pancreas"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys are the primary organs responsible for filtering blood, removing waste products, and regulating fluid balance in the body. The liver filters blood, but its primary function is detoxification and metabolism. The spleen filters blood and plays a role in the immune system. The pancreas produces enzymes and hormones."
}
```
2025-04-30 15:11:12,103 - agents.game_agent - DEBUG - Parsed question data: {'text': 'Which organ is primarily responsible for filtering blood and removing waste products from the body?', 'choices': ['Liver', 'Kidney', 'Spleen', 'Pancreas'], 'correct_answer': 'Kidney', 'category': 'body_parts', 'difficulty': 'easy', 'explanation': 'The kidneys are the primary organs responsible for filtering blood, removing waste products, and regulating fluid balance in the body. The liver filters blood, but its primary function is detoxification and metabolism. The spleen filters blood and plays a role in the immune system. The pancreas produces enzymes and hormones.'}
2025-04-30 15:11:12,169 - agents.game_agent - INFO - Successfully generated question: Which organ is primarily responsible for filtering blood and removing waste products from the body?
2025-04-30 15:11:13,227 - agents.game_agent - INFO - Generating question 2/5
2025-04-30 15:11:13,228 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 15:11:37,903 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": ["Liver", "Kidney", "Spleen", "Gallbladder"],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys are the primary organs responsible for filtering waste products, excess water, and other impurities from the blood. These waste products are then excreted as urine."
}
```
2025-04-30 15:11:37,945 - agents.game_agent - DEBUG - Parsed question data: {'text': 'Which organ is primarily responsible for filtering waste products from the blood?', 'choices': ['Liver', 'Kidney', 'Spleen', 'Gallbladder'], 'correct_answer': 'Kidney', 'category': 'body_parts', 'difficulty': 'easy', 'explanation': 'The kidneys are the primary organs responsible for filtering waste products, excess water, and other impurities from the blood. These waste products are then excreted as urine.'}
2025-04-30 15:11:37,997 - agents.game_agent - INFO - Successfully generated question: Which organ is primarily responsible for filtering waste products from the blood?
2025-04-30 15:11:39,158 - agents.game_agent - INFO - Generating question 3/5
2025-04-30 15:11:39,190 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 15:12:33,158 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Pancreas"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys are the primary organs responsible for filtering waste products, excess water, and other impurities from the blood. These waste products are then excreted as urine."
}
```
2025-04-30 15:12:33,160 - agents.game_agent - DEBUG - Parsed question data: {'text': 'Which organ is primarily responsible for filtering waste products from the blood?', 'choices': ['Liver', 'Kidney', 'Spleen', 'Pancreas'], 'correct_answer': 'Kidney', 'category': 'body_parts', 'difficulty': 'easy', 'explanation': 'The kidneys are the primary organs responsible for filtering waste products, excess water, and other impurities from the blood. These waste products are then excreted as urine.'}
2025-04-30 15:12:33,162 - agents.game_agent - INFO - Successfully generated question: Which organ is primarily responsible for filtering waste products from the blood?
2025-04-30 15:12:34,204 - agents.game_agent - INFO - Generating question 4/5
2025-04-30 15:12:34,232 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 15:12:46,866 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": [
    "Liver",
    "Kidney",
    "Spleen",
    "Gallbladder"
  ],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys are the primary organs responsible for filtering waste products from the blood and producing urine. The liver filters blood, but it primarily breaks down and metabolizes substances. The spleen filters blood and helps fight infections. The gallbladder stores bile."
}
```
2025-04-30 15:12:46,871 - agents.game_agent - DEBUG - Parsed question data: {'text': 'Which organ is primarily responsible for filtering waste products from the blood?', 'choices': ['Liver', 'Kidney', 'Spleen', 'Gallbladder'], 'correct_answer': 'Kidney', 'category': 'body_parts', 'difficulty': 'easy', 'explanation': 'The kidneys are the primary organs responsible for filtering waste products from the blood and producing urine. The liver filters blood, but it primarily breaks down and metabolizes substances. The spleen filters blood and helps fight infections. The gallbladder stores bile.'}
2025-04-30 15:12:46,876 - agents.game_agent - INFO - Successfully generated question: Which organ is primarily responsible for filtering waste products from the blood?
2025-04-30 15:12:47,942 - agents.game_agent - INFO - Generating question 5/5
2025-04-30 15:12:47,953 - agents.game_agent - INFO - Attempting to generate question (attempt 1/3)
2025-04-30 15:13:17,603 - langchain_google_genai.chat_models - WARNING - Retrying langchain_google_genai.chat_models._achat_with_retry.<locals>._achat_with_retry in 2.0 seconds as it raised ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 15
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 42
}
].
2025-04-30 15:13:19,941 - agents.game_agent - ERROR - Unexpected error generating question: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 15
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 40
}
]
Traceback (most recent call last):
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\agents\game_agent.py", line 93, in generate_question
    response = await self.chain.ainvoke("")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\runnables\base.py", line 3075, in ainvoke
    input = await coro_with_context(part(), context, create_task=True)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\language_models\chat_models.py", line 391, in ainvoke
    llm_result = await self.agenerate_prompt(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\language_models\chat_models.py", line 957, in agenerate_prompt
    return await self.agenerate(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\language_models\chat_models.py", line 915, in agenerate
    raise exceptions[0]
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_core\language_models\chat_models.py", line 1083, in _agenerate_with_cache
    result = await self._agenerate(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_google_genai\chat_models.py", line 1010, in _agenerate
    response: GenerateContentResponse = await _achat_with_retry(
                                        ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_google_genai\chat_models.py", line 229, in _achat_with_retry
    return await _achat_with_retry(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\tenacity\__init__.py", line 420, in exc_check
    raise retry_exc.reraise()
          ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\tenacity\__init__.py", line 187, in reraise
    raise self.last_attempt.result()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\_base.py", line 401, in __get_result
    raise self._exception
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_google_genai\chat_models.py", line 227, in _achat_with_retry
    raise e
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\langchain_google_genai\chat_models.py", line 220, in _achat_with_retry
    return await generation_method(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\async_client.py", line 440, in generate_content
    response = await rpc(
               ^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\google\api_core\retry\retry_unary_async.py", line 231, in retry_wrapped_func
    return await retry_target(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\google\api_core\retry\retry_unary_async.py", line 163, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\google\api_core\retry\retry_unary_async.py", line 158, in retry_target
    return await target()
           ^^^^^^^^^^^^^^
  File "C:\Users\S\PycharmProjects\dermadect-oc-fastapi\.venv\Lib\site-packages\google\api_core\grpc_helpers_async.py", line 88, in __await__
    raise exceptions.from_grpc_error(rpc_error) from rpc_error
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 15
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 40
}
]
2025-04-30 15:13:19,982 - agents.game_agent - INFO - Retrying in 2 seconds...
2025-04-30 15:13:22,009 - agents.game_agent - INFO - Attempting to generate question (attempt 2/3)
2025-04-30 15:13:22,247 - langchain_google_genai.chat_models - WARNING - Retrying langchain_google_genai.chat_models._achat_with_retry.<locals>._achat_with_retry in 2.0 seconds as it raised ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 15
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 37
}
].
2025-04-30 15:13:32,718 - agents.game_agent - DEBUG - LLM raw response: ```json
{
  "text": "Which organ is primarily responsible for filtering waste products from the blood?",
  "choices": ["Liver", "Kidney", "Spleen", "Pancreas"],
  "correct_answer": "Kidney",
  "category": "body_parts",
  "difficulty": "easy",
  "explanation": "The kidneys are the primary organs responsible for filtering waste products, excess water, and other impurities from the blood. They then excrete these wastes as urine."
}
```
2025-04-30 15:13:32,719 - agents.game_agent - DEBUG - Parsed question data: {'text': 'Which organ is primarily responsible for filtering waste products from the blood?', 'choices': ['Liver', 'Kidney', 'Spleen', 'Pancreas'], 'correct_answer': 'Kidney', 'category': 'body_parts', 'difficulty': 'easy', 'explanation': 'The kidneys are the primary organs responsible for filtering waste products, excess water, and other impurities from the blood. They then excrete these wastes as urine.'}
2025-04-30 15:13:32,720 - agents.game_agent - INFO - Successfully generated question: Which organ is primarily responsible for filtering waste products from the blood?
2025-04-30 15:13:33,739 - agents.game_agent - INFO - Successfully generated 5 questions
2025-04-30 15:16:29,532 - main - INFO - Received game request from user 1234
2025-04-30 15:16:32,885 - agents.game_agent - INFO - Starting to generate 5 questions
2025-04-30 15:16:32,886 - agents.game_agent - INFO - Generating 5 questions in a single call
2025-04-30 15:16:37,664 - agents.game_agent - DEBUG - LLM raw response: ```json
[
  {
    "text": "Which organ is primarily responsible for filtering waste products from the blood?",
    "choices": ["Liver", "Kidney", "Heart", "Lungs"],
    "correct_answer": "Kidney",
    "category": "body_parts",
    "difficulty": "easy",
    "explanation": "The kidneys filter waste products and excess water from the blood, which are then excreted as urine. The liver processes toxins, the heart pumps blood, and the lungs facilitate gas exchange."
  },
  {
    "text": "What is the main function of the small intestine?",
    "choices": ["Absorbing water", "Storing waste", "Absorbing nutrients", "Producing bile"],
    "correct_answer": "Absorbing nutrients",
    "category": "body_parts",
    "difficulty": "medium",
    "explanation": "The small intestine is the primary site for nutrient absorption in the digestive system. While some water absorption occurs there, it's the main function of the large intestine. Waste storage is a function of the rectum and anus, and bile is produced by the liver."
  },
  {
    "text": "Which part of the eye is responsible for focusing light onto the retina?",
    "choices": ["Iris", "Pupil", "Lens", "Sclera"],
    "correct_answer": "Lens",
    "category": "body_parts",
    "difficulty": "medium",
    "explanation": "The lens of the eye changes shape to focus light rays onto the retina, allowing us to see objects clearly at different distances. The iris controls the size of the pupil, the pupil controls the amount of light entering the eye, and the sclera is the white outer layer of the eye."
  },
  {
    "text": "Which chamber of the heart pumps oxygenated blood to the rest of the body?",
    "choices": ["Right Atrium", "Left Atrium", "Right Ventricle", "Left Ventricle"],
    "correct_answer": "Left Ventricle",
    "category": "body_parts",
    "difficulty": "medium",
    "explanation": "The left ventricle is the strongest chamber of the heart and pumps oxygenated blood through the aorta to the rest of the body. The right ventricle pumps deoxygenated blood to the lungs, and the atria receive blood from the body and lungs respectively."
  },
  {
    "text": "Which part of the brain is primarily responsible for coordinating movement and balance?",
    "choices": ["Cerebrum", "Cerebellum", "Brainstem", "Thalamus"],
    "correct_answer": "Cerebellum",
    "category": "body_parts",
    "difficulty": "hard",
    "explanation": "The cerebellum is crucial for motor control, coordination, and balance. The cerebrum is responsible for higher-level thinking, the brainstem controls basic life functions, and the thalamus relays sensory information."
  }
]
```
2025-04-30 15:16:37,676 - agents.game_agent - DEBUG - Parsed questions data: [{'text': 'Which organ is primarily responsible for filtering waste products from the blood?', 'choices': ['Liver', 'Kidney', 'Heart', 'Lungs'], 'correct_answer': 'Kidney', 'category': 'body_parts', 'difficulty': 'easy', 'explanation': 'The kidneys filter waste products and excess water from the blood, which are then excreted as urine. The liver processes toxins, the heart pumps blood, and the lungs facilitate gas exchange.'}, {'text': 'What is the main function of the small intestine?', 'choices': ['Absorbing water', 'Storing waste', 'Absorbing nutrients', 'Producing bile'], 'correct_answer': 'Absorbing nutrients', 'category': 'body_parts', 'difficulty': 'medium', 'explanation': "The small intestine is the primary site for nutrient absorption in the digestive system. While some water absorption occurs there, it's the main function of the large intestine. Waste storage is a function of the rectum and anus, and bile is produced by the liver."}, {'text': 'Which part of the eye is responsible for focusing light onto the retina?', 'choices': ['Iris', 'Pupil', 'Lens', 'Sclera'], 'correct_answer': 'Lens', 'category': 'body_parts', 'difficulty': 'medium', 'explanation': 'The lens of the eye changes shape to focus light rays onto the retina, allowing us to see objects clearly at different distances. The iris controls the size of the pupil, the pupil controls the amount of light entering the eye, and the sclera is the white outer layer of the eye.'}, {'text': 'Which chamber of the heart pumps oxygenated blood to the rest of the body?', 'choices': ['Right Atrium', 'Left Atrium', 'Right Ventricle', 'Left Ventricle'], 'correct_answer': 'Left Ventricle', 'category': 'body_parts', 'difficulty': 'medium', 'explanation': 'The left ventricle is the strongest chamber of the heart and pumps oxygenated blood through the aorta to the rest of the body. The right ventricle pumps deoxygenated blood to the lungs, and the atria receive blood from the body and lungs respectively.'}, {'text': 'Which part of the brain is primarily responsible for coordinating movement and balance?', 'choices': ['Cerebrum', 'Cerebellum', 'Brainstem', 'Thalamus'], 'correct_answer': 'Cerebellum', 'category': 'body_parts', 'difficulty': 'hard', 'explanation': 'The cerebellum is crucial for motor control, coordination, and balance. The cerebrum is responsible for higher-level thinking, the brainstem controls basic life functions, and the thalamus relays sensory information.'}]
2025-04-30 15:16:37,680 - agents.game_agent - INFO - Successfully generated question: Which organ is primarily responsible for filtering waste products from the blood?
2025-04-30 15:16:37,681 - agents.game_agent - INFO - Successfully generated question: What is the main function of the small intestine?
2025-04-30 15:16:37,682 - agents.game_agent - INFO - Successfully generated question: Which part of the eye is responsible for focusing light onto the retina?
2025-04-30 15:16:37,682 - agents.game_agent - INFO - Successfully generated question: Which chamber of the heart pumps oxygenated blood to the rest of the body?
2025-04-30 15:16:37,683 - agents.game_agent - INFO - Successfully generated question: Which part of the brain is primarily responsible for coordinating movement and balance?
2025-04-30 15:16:37,683 - agents.game_agent - INFO - Successfully generated 5 questions
2025-04-30 15:17:18,754 - main - INFO - Received game request from user 1234
2025-04-30 15:17:47,902 - main - INFO - Received game request from user 1234
2025-04-30 15:18:05,770 - main - INFO - Received game request from user 1234
2025-04-30 15:18:20,325 - main - INFO - Received game request from user 1234
2025-04-30 15:18:45,370 - main - INFO - Received game request from user 1234
2025-04-30 15:43:06,602 - services.firebase_service - ERROR - Failed to parse FIREBASE_SERVICE_ACCOUNT_JSON: Expecting value: line 1 column 1 (char 0)
2025-04-30 15:44:50,899 - services.firebase_service - INFO - Firebase initialized successfully
2025-04-30 15:45:35,137 - main - INFO - Received game request from user 1234
2025-04-30 15:45:37,604 - agents.game_agent - INFO - Starting to generate 5 questions
2025-04-30 15:45:37,607 - agents.game_agent - INFO - Generating 5 questions in a single call
2025-04-30 15:45:41,531 - agents.game_agent - DEBUG - LLM raw response: ```json
[
  {
    "text": "Which organ is primarily responsible for filtering waste products from the blood?",
    "choices": ["Liver", "Kidney", "Spleen", "Pancreas"],
    "correct_answer": "Kidney",
    "category": "body_parts",
    "difficulty": "easy",
    "explanation": "The kidneys filter waste products from the blood and produce urine."
  },
  {
    "text": "What is the main function of the small intestine?",
    "choices": ["Absorbing water", "Storing waste", "Absorbing nutrients", "Producing bile"],
    "correct_answer": "Absorbing nutrients",
    "category": "body_parts",
    "difficulty": "medium",
    "explanation": "The small intestine is the primary site for nutrient absorption into the bloodstream."
  },
  {
    "text": "The heart is primarily composed of what type of tissue?",
    "choices": ["Epithelial tissue", "Connective tissue", "Nervous tissue", "Muscle tissue"],
    "correct_answer": "Muscle tissue",
    "category": "body_parts",
    "difficulty": "easy",
    "explanation": "The heart is primarily made of cardiac muscle, which allows it to contract and pump blood."
  },
  {
    "text": "Which part of the eye is responsible for focusing light onto the retina?",
    "choices": ["Iris", "Pupil", "Lens", "Sclera"],
    "correct_answer": "Lens",
    "category": "body_parts",
    "difficulty": "medium",
    "explanation": "The lens changes shape to focus light rays onto the retina, allowing us to see clearly at different distances."
  },
  {
    "text": "What is the primary function of the lungs?",
    "choices": ["Filtering blood", "Producing hormones", "Exchanging gases", "Storing energy"],
    "correct_answer": "Exchanging gases",
    "category": "body_parts",
    "difficulty": "easy",
    "explanation": "The lungs facilitate the exchange of oxygen and carbon dioxide between the air and the bloodstream."
  }
]
```
2025-04-30 15:45:41,534 - agents.game_agent - DEBUG - Parsed questions data: [{'text': 'Which organ is primarily responsible for filtering waste products from the blood?', 'choices': ['Liver', 'Kidney', 'Spleen', 'Pancreas'], 'correct_answer': 'Kidney', 'category': 'body_parts', 'difficulty': 'easy', 'explanation': 'The kidneys filter waste products from the blood and produce urine.'}, {'text': 'What is the main function of the small intestine?', 'choices': ['Absorbing water', 'Storing waste', 'Absorbing nutrients', 'Producing bile'], 'correct_answer': 'Absorbing nutrients', 'category': 'body_parts', 'difficulty': 'medium', 'explanation': 'The small intestine is the primary site for nutrient absorption into the bloodstream.'}, {'text': 'The heart is primarily composed of what type of tissue?', 'choices': ['Epithelial tissue', 'Connective tissue', 'Nervous tissue', 'Muscle tissue'], 'correct_answer': 'Muscle tissue', 'category': 'body_parts', 'difficulty': 'easy', 'explanation': 'The heart is primarily made of cardiac muscle, which allows it to contract and pump blood.'}, {'text': 'Which part of the eye is responsible for focusing light onto the retina?', 'choices': ['Iris', 'Pupil', 'Lens', 'Sclera'], 'correct_answer': 'Lens', 'category': 'body_parts', 'difficulty': 'medium', 'explanation': 'The lens changes shape to focus light rays onto the retina, allowing us to see clearly at different distances.'}, {'text': 'What is the primary function of the lungs?', 'choices': ['Filtering blood', 'Producing hormones', 'Exchanging gases', 'Storing energy'], 'correct_answer': 'Exchanging gases', 'category': 'body_parts', 'difficulty': 'easy', 'explanation': 'The lungs facilitate the exchange of oxygen and carbon dioxide between the air and the bloodstream.'}]
2025-04-30 15:45:41,541 - agents.game_agent - INFO - Successfully generated question: Which organ is primarily responsible for filtering waste products from the blood?
2025-04-30 15:45:41,547 - agents.game_agent - INFO - Successfully generated question: What is the main function of the small intestine?
2025-04-30 15:45:41,550 - agents.game_agent - INFO - Successfully generated question: The heart is primarily composed of what type of tissue?
2025-04-30 15:45:41,558 - agents.game_agent - INFO - Successfully generated question: Which part of the eye is responsible for focusing light onto the retina?
2025-04-30 15:45:41,565 - agents.game_agent - INFO - Successfully generated question: What is the primary function of the lungs?
2025-04-30 15:45:41,573 - agents.game_agent - INFO - Successfully generated 5 questions
